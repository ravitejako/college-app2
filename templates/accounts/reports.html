{% extends 'base.html' %}
{% load static %}

{% block title %}Reports - {{ user.get_full_name }}{% endblock %}

{% block extra_css %}
<style>
    .reports-section {
        background: white;
        border-radius: 15px;
        padding: 2rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        margin-bottom: 2rem;
    }
    
    .reports-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
    }
    
    .reports-title {
        color: #1a202c;
        font-size: 1.1rem;
        font-weight: 600;
        margin: 0;
    }

    .report-filters {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .filter-select {
        padding: 0.5rem 1rem;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        background: white;
        color: #4a5568;
        min-width: 200px;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .stat-card {
        background: #f8fafc;
        border-radius: 12px;
        padding: 1.5rem;
        border: 1px solid #e2e8f0;
    }

    .stat-title {
        color: #4a5568;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
    }

    .stat-value {
        color: #1a202c;
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .stat-change {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
    }

    .change-positive {
        color: #059669;
    }

    .change-negative {
        color: #dc2626;
    }

    .report-sections {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    .report-card {
        background: white;
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        overflow: hidden;
    }

    .report-card-header {
        background: #f8fafc;
        padding: 1rem 1.5rem;
        border-bottom: 1px solid #e2e8f0;
    }

    .report-card-title {
        color: #1a202c;
        font-size: 1rem;
        font-weight: 600;
        margin: 0;
    }

    .report-card-body {
        padding: 1.5rem;
    }

    .progress-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .progress-item {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .progress-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.9rem;
    }

    .progress-subject {
        color: #4a5568;
        font-weight: 500;
    }

    .progress-value {
        color: #1a202c;
        font-weight: 600;
    }

    .progress-bar {
        height: 6px;
        background: #e2e8f0;
        border-radius: 3px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background: #4299e1;
        border-radius: 3px;
        transition: width 0.3s ease;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="reports-section">
        <div class="reports-header">
            <h3 class="reports-title">Academic Reports</h3>
        </div>
        <div class="report-filters">
            <select class="filter-select">
                <option>2024-2025, EVEN, CSE-IBM</option>
            </select>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-title">Overall Attendance</div>
                <div class="stat-value">85.5%</div>
                <div class="stat-change change-positive">
                    <i class="fas fa-arrow-up"></i>
                    2.3% from last month
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Average Score</div>
                <div class="stat-value">78.2%</div>
                <div class="stat-change change-positive">
                    <i class="fas fa-arrow-up"></i>
                    4.1% from last semester
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Assignments Completed</div>
                <div class="stat-value">12/15</div>
                <div class="stat-change">
                    3 pending submissions
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Class Rank</div>
                <div class="stat-value">#15</div>
                <div class="stat-change change-positive">
                    <i class="fas fa-arrow-up"></i>
                    Up 3 positions
                </div>
            </div>
        </div>

        <div class="report-sections">
            <div class="report-card">
                <div class="report-card-header">
                    <h4 class="report-card-title">Subject Performance</h4>
                </div>
                <div class="report-card-body">
                    <div class="progress-list">
                        <div class="progress-item">
                            <div class="progress-header">
                                <span class="progress-subject">Python Programming</span>
                                <span class="progress-value">85%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 85%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span class="progress-subject">Data Structures</span>
                                <span class="progress-value">78%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 78%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span class="progress-subject">Database Management</span>
                                <span class="progress-value">92%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 92%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span class="progress-subject">Web Development</span>
                                <span class="progress-value">88%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 88%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="report-card">
                <div class="report-card-header">
                    <h4 class="report-card-title">Recent Performance</h4>
                </div>
                <div class="report-card-body">
                    <canvas id="performanceChart" height="250"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var ctx = document.getElementById('performanceChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
                datasets: [{
                    label: 'Performance Score',
                    data: [75, 78, 76, 82, 85],
                    borderColor: '#4299e1',
                    backgroundColor: 'rgba(66, 153, 225, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            stepSize: 20
                        }
                    }
                }
            }
        });
    });
</script>
{% endblock %} 